<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Калькулятор эффекта — холодная плазма</title>
  <style>
    :root{
      --bg:#0b0c10; --card:#111218; --fg:#e9eef3; --muted:#9aa7b2; --accent:#6ae3ff;
      --ok:#6ee7b7; --warn:#facc15; --bad:#fb7185; --shadow:0 10px 30px rgba(0,0,0,.25);
      --summary:#1a2430; --summary-border:#1f95c2;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f7fb; --card:#ffffff; --fg:#111827; --muted:#6b7280; --accent:#0ea5e9;
        --ok:#059669; --warn:#b45309; --bad:#be123c; --shadow:0 10px 30px rgba(0,0,0,.08);
        --summary:#e9f6ff; --summary-border:#0ea5e9;
      }
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--fg);
      font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Inter,Arial,sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      display:flex; min-height:100dvh; align-items:center; justify-content:center; padding:24px;
    }
    .app{width:100%; max-width:680px}
    .card{
      background:var(--card); border-radius:20px; padding:20px; box-shadow:var(--shadow);
      border:1px solid rgba(255,255,255,.06);
    }
    .logo{
      display:block; margin:0 auto 16px; max-width:180px; width:60%; height:auto;
      filter: drop-shadow(0 0 12px rgba(106,227,255,.35));
    }
    h1{margin:0 0 8px; font-weight:700; font-size:clamp(20px,4vw,28px)}
    p.sub{margin:0 0 16px; color:var(--muted)}
    .row{display:grid; grid-template-columns:1fr; gap:12px; margin:14px 0 8px}
    @media (min-width:560px){ .row{grid-template-columns:1fr 1fr} }
    .input{
      display:flex; align-items:flex-start; gap:10px; background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:12px 14px;
    }
    .input input{
      flex:1; min-width:0; background:transparent; border:0; outline:0; color:var(--fg);
      font-size:18px; font-weight:600;
    }
    .unit{
      flex:1; color:var(--muted); font-size:13px; line-height:1.3; text-align:right;
      white-space:normal; overflow-wrap:anywhere;
    }
    @media (max-width:420px){
      .input{flex-direction:column; align-items:stretch}
      .unit{text-align:left}
    }
    .kpis{display:grid; grid-template-columns:1fr; gap:10px; margin-top:14px}
    @media (min-width:560px){ .kpis{grid-template-columns:repeat(2,1fr)} }
    .kpi{
      background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.08);
      border-radius:14px; padding:14px;
    }
    .kpi .label{color:var(--muted); font-size:12px; text-transform:uppercase; letter-spacing:.06em}
    .kpi .value{font-size:22px; font-weight:800; margin-top:4px; overflow-wrap:anywhere}
    .kpi.good .value{color:var(--ok)} .kpi.warn .value{color:var(--warn)}

    details{margin-top:12px}
    summary{
      cursor:pointer; padding:12px 14px; border-radius:12px;
      background:var(--summary); border-left:4px solid var(--summary-border);
      list-style:none; user-select:none; color:var(--fg); font-weight:700;
    }
    summary::-webkit-details-marker{display:none}
    .grid{display:grid; grid-template-columns:1fr; gap:10px; margin-top:10px}
    @media (min-width:560px){ .grid{grid-template-columns:repeat(2,1fr)} }
    .small{font-size:12px; color:var(--muted); margin-top:6px}
    .footer{margin-top:14px; color:var(--muted); font-size:12px}
    .accent{color:var(--accent); font-weight:700}
  </style>
</head>
<body>
  <main class="app">
    <section class="card">
      <!-- ЛОГО -->
      <img src="Logo.PNG" alt="MethaneX Logo" class="logo" />

      <h1>Online effect calculation</h1>
      <p class="sub">Enter annual methane emissions in <b>m³/year</b> — see products, climate impact, and economics.</p>

      <div class="row">
        <label class="input" title="Annual methane volume (standard m³/year)">
          <input id="flow" type="number" min="0" step="100" placeholder="m³/year" inputmode="numeric" />
          <span class="unit">m³/year</span>
        </label>
      </div>

      <div class="kpis" id="results">
        <div class="kpi">
          <div class="label">Hydrogen</div>
          <div class="value" id="h2Mass">—</div>
          <div class="small" id="h2Vol"> </div>
        </div>
        <div class="kpi">
          <div class="label">Solid carbon</div>
          <div class="value" id="cMass">—</div>
          <div class="small">t/year</div>
        </div>
        <div class="kpi">
          <div class="label">Reduction GG (CO₂-eq.)</div>
          <div class="value" id="co2e">—</div>
          <div class="small">т CO₂-eq./year</div>
        </div>
        <div class="kpi good">
          <div class="label">Annual financial result*</div>
          <div class="value" id="profit">—</div>
          <div class="small">before CAPEX</div>
        </div>
      </div>

      <details>
        <summary>Advanced settings (default basic scenario)</summary>
        <div class="grid">
          <label class="input">
            <input id="conv" type="number" min="0" max="100" step="1" value="70" />
            <span class="unit">Conversion CH₄, %</span>
          </label>
          <label class="input">
            <input id="sei" type="number" min="0" step="0.1" value="3.5" />
            <span class="unit">Specific energy, kW·h/m³ CH₄</span>
          </label>
          <label class="input">
            <input id="tariff" type="number" min="0" step="0.01" value="0.12" />
            <span class="unit">Tariff, $/kW·h</span>
          </label>
          <label class="input">
            <input id="h2price" type="number" min="0" step="0.1" value="1.5" />
            <span class="unit">Price of H₂, $/kg</span>
          </label>
          <label class="input">
            <input id="cprice" type="number" min="0" step="1" value="150" />
            <span class="unit">Price of C (carbon black), $/t</span>
          </label>
          <label class="input">
            <input id="ccost" type="number" min="0" step="1" value="10" />
            <span class="unit">Price of CO₂-quotas/effect, $/t</span>
          </label>
          <label class="input">
            <input id="gwp" type="number" min="1" step="0.1" value="28" />
            <span class="unit">GWP₁₀₀ CH₄ (IPCC), kg CO₂-eq./kg CH₄</span>
          </label>
        </div>
        <p class="small">* Financial result = revenue from H₂ + revenue from C + carbon effect − energy costs. CAPEX is not taken into account on this screen.</p>
      </details>

      <div class="footer">Stoichiometry: CH₄ → C + 2H₂. <span class="accent">1 m³ CH₄</span> ≈ 0.716 kg; yields ≈ <span class="accent">2 m³ H₂</span> (≈0.179 kg) and <span class="accent">0.536 kg C</span>.</div>
    </section>
  </main>

  <script>
    // Constants
    const KG_CH4_PER_NM3 = 0.716;     // kg CH4 / m³ CH4
    const KG_H2_PER_NM3_CH4 = 0.1786; // kg H2 / m³ CH4
    const NM3_H2_PER_NM3_CH4 = 2.0;   // m³ H2 / m³ CH4
    const KG_C_PER_NM3_CH4  = 0.536;  // kg C / m³ CH4

    const $ = (id) => document.getElementById(id);
    const fmt = (x, digits=0) => {
      if (!isFinite(x)) return "—";
      return x.toLocaleString("ru-RU", { maximumFractionDigits: digits, minimumFractionDigits: digits });
    }

    const inputs = ["flow","conv","sei","tariff","h2price","cprice","ccost","gwp"].map($);
    inputs.forEach(el => el.addEventListener("input", calc));
    window.addEventListener("DOMContentLoaded", calc);

    function calc(){
      const flow = +$("flow").value || 0;           // m³ CH4/year
      const conv = (+$("conv").value || 0)/100;     // share
      const sei  = +$("sei").value || 0;            // kW·h/m³ CH4
      const tariff = +$("tariff").value || 0;       // $/kW·h
      const h2p = +$("h2price").value || 0;         // $/kg H2
      const cp  = +$("cprice").value || 0;          // $/t C
      const cc  = +$("ccost").value || 0;           // $/t CO2e
      const gwp = +$("gwp").value || 28;            // kg CO2e / kg CH4

      const flowEff = flow * conv;                  // m³/year CH4, effectively destroyed

      // Products
      const h2kg  = flowEff * KG_H2_PER_NM3_CH4;    // kg/year H2
      const h2m3  = flowEff * NM3_H2_PER_NM3_CH4;   // m³/year H2
      const ckg   = flowEff * KG_C_PER_NM3_CH4;     // kg/year C
      const ct    = ckg / 1000;                     // t/year C

      // Energy and its cost
      const kwh   = flowEff * sei;                  // kW·h/year
      const energyCost = kwh * tariff;              // $/year

      // Climate effect
      const ch4kg = flowEff * KG_CH4_PER_NM3;       // kg CH4/year
      const co2e_t = (ch4kg * gwp) / 1000;          // t CO2e/year

      // Revenue
      const revH2 = h2kg * h2p;                     // $/year
      const revC  = ct * cp;                        // $/year
      const revCO2 = co2e_t * cc;                   // $/year

      const profit = revH2 + revC + revCO2 - energyCost;

      // Display
      $("h2Mass").textContent = (h2kg>0)? `${fmt(h2kg,0)} kg/year` : "—";
      $("h2Vol").textContent  = (h2m3>0)? `${fmt(h2m3,0)} m³/year` : "";
      $("cMass").textContent  = (ct>0)? `${fmt(ct,2)}` : "—";
      $("co2e").textContent   = (co2e_t>0)? `${fmt(co2e_t,1)}` : "—";
      $("profit").textContent = isFinite(profit)? `${profit>=0?"+":""}${fmt(profit,0)} $/year` : "—";
    }
  </script>
</body>
</html>
