<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Калькулятор эффекта — холодная плазма</title>
  <style>
    :root{
      --bg:#0b0c10; --card:#111218; --fg:#e9eef3; --muted:#9aa7b2; --accent:#6ae3ff;
      --ok:#6ee7b7; --warn:#facc15; --bad:#fb7185; --shadow:0 10px 30px rgba(0,0,0,.25);
      --summary:#1a2430; --summary-border:#1f95c2;
    }
    @media (prefers-color-scheme: light){
      :root{
        --bg:#f6f7fb; --card:#ffffff; --fg:#111827; --muted:#6b7280; --accent:#0ea5e9;
        --ok:#059669; --warn:#b45309; --bad:#be123c; --shadow:0 10px 30px rgba(0,0,0,.08);
        --summary:#e9f6ff; --summary-border:#0ea5e9;
      }
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--fg);
      font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Inter,Arial,sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      display:flex; min-height:100dvh; align-items:center; justify-content:center; padding:24px;
    }
    .app{width:100%; max-width:680px}
    .card{
      background:var(--card); border-radius:20px; padding:20px; box-shadow:var(--shadow);
      border:1px solid rgba(255,255,255,.06);
    }
    .logo{
      display:block; margin:0 auto 16px; max-width:180px; width:60%; height:auto;
      filter: drop-shadow(0 0 12px rgba(106,227,255,.35));
    }
    h1{margin:0 0 8px; font-weight:700; font-size:clamp(20px,4vw,28px)}
    p.sub{margin:0 0 16px; color:var(--muted)}
    .row{display:grid; grid-template-columns:1fr; gap:12px; margin:14px 0 8px}
    @media (min-width:560px){ .row{grid-template-columns:1fr 1fr} }
    .input{
      display:flex; align-items:flex-start; gap:10px; background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.08); border-radius:14px; padding:12px 14px;
    }
    .input input{
      flex:1; min-width:0; background:transparent; border:0; outline:0; color:var(--fg);
      font-size:18px; font-weight:600;
    }
    .unit{
      flex:1; color:var(--muted); font-size:13px; line-height:1.3; text-align:right;
      white-space:normal; overflow-wrap:anywhere;
    }
    @media (max-width:420px){
      .input{flex-direction:column; align-items:stretch}
      .unit{text-align:left}
    }
    .kpis{display:grid; grid-template-columns:1fr; gap:10px; margin-top:14px}
    @media (min-width:560px){ .kpis{grid-template-columns:repeat(2,1fr)} }
    .kpi{
      background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.08);
      border-radius:14px; padding:14px;
    }
    .kpi .label{color:var(--muted); font-size:12px; text-transform:uppercase; letter-spacing:.06em}
    .kpi .value{font-size:22px; font-weight:800; margin-top:4px; overflow-wrap:anywhere}
    .kpi.good .value{color:var(--ok)} .kpi.warn .value{color:var(--warn)}

    details{margin-top:12px}
    summary{
      cursor:pointer; padding:12px 14px; border-radius:12px;
      background:var(--summary); border-left:4px solid var(--summary-border);
      list-style:none; user-select:none; color:var(--fg); font-weight:700;
    }
    summary::-webkit-details-marker{display:none}
    .grid{display:grid; grid-template-columns:1fr; gap:10px; margin-top:10px}
    @media (min-width:560px){ .grid{grid-template-columns:repeat(2,1fr)} }
    .small{font-size:12px; color:var(--muted); margin-top:6px}
    .footer{margin-top:14px; color:var(--muted); font-size:12px}
    .accent{color:var(--accent); font-weight:700}
  </style>
</head>
<body>
  <main class="app">
    <section class="card">
      <!-- ЛОГО -->
      <img src="Logo.PNG" alt="MethaneX Logo" class="logo" />

      <h1>Онлайн-расчёт эффекта</h1>
      <p class="sub">Введите годовые выбросы метана в <b>м³/год</b> — увидите продукты, климатический эффект и экономику.</p>

      <div class="row">
        <label class="input" title="Годовой объём метана (норм. м³/год)">
          <input id="flow" type="number" min="0" step="100" placeholder="м³/год" inputmode="numeric" />
          <span class="unit">м³/год</span>
        </label>
      </div>

      <div class="kpis" id="results">
        <div class="kpi">
          <div class="label">Водород</div>
          <div class="value" id="h2Mass">—</div>
          <div class="small" id="h2Vol"> </div>
        </div>
        <div class="kpi">
          <div class="label">Твёрдый углерод</div>
          <div class="value" id="cMass">—</div>
          <div class="small">т/год</div>
        </div>
        <div class="kpi">
          <div class="label">Сокращение ПГ (CO₂-экв.)</div>
          <div class="value" id="co2e">—</div>
          <div class="small">т CO₂-экв./год</div>
        </div>
        <div class="kpi good">
          <div class="label">Годовой финансовый результат*</div>
          <div class="value" id="profit">—</div>
          <div class="small">до вычета CAPEX</div>
        </div>
      </div>

      <details>
        <summary>Расширенные настройки (по умолчанию базовый сценарий)</summary>
        <div class="grid">
          <label class="input">
            <input id="conv" type="number" min="0" max="100" step="1" value="70" />
            <span class="unit">Конверсия CH₄, %</span>
          </label>
          <label class="input">
            <input id="sei" type="number" min="0" step="0.1" value="3.5" />
            <span class="unit">Удельная энергия, кВт·ч/м³ CH₄</span>
          </label>
          <label class="input">
            <input id="tariff" type="number" min="0" step="0.01" value="0.12" />
            <span class="unit">Тариф, $/кВт·ч</span>
          </label>
          <label class="input">
            <input id="h2price" type="number" min="0" step="0.1" value="1.5" />
            <span class="unit">Цена H₂, $/кг</span>
          </label>
          <label class="input">
            <input id="cprice" type="number" min="0" step="1" value="150" />
            <span class="unit">Цена C (сажи), $/т</span>
          </label>
          <label class="input">
            <input id="ccost" type="number" min="0" step="1" value="10" />
            <span class="unit">Стоимость CO₂-квот/эффекта, $/т</span>
          </label>
          <label class="input">
            <input id="gwp" type="number" min="1" step="0.1" value="28" />
            <span class="unit">GWP₁₀₀ CH₄ (IPCC), кг CO₂-экв./кг CH₄</span>
          </label>
        </div>
        <p class="small">* Финансовый результат = выручка от H₂ + выручка от C + углеродный эффект − стоимость энергии. CAPEX не учитывается на этом экране.</p>
      </details>

      <div class="footer">Стехиометрия: CH₄ → C + 2H₂. <span class="accent">1 м³ CH₄</span> ≈ 0.716 кг; даёт ≈ <span class="accent">2 м³ H₂</span> (≈0.179 кг) и <span class="accent">0.536 кг C</span>.</div>
    </section>
  </main>

  <script>
    // Константы
    const KG_CH4_PER_NM3 = 0.716;     // кг CH4 / м³ CH4
    const KG_H2_PER_NM3_CH4 = 0.1786; // кг H2 / м³ CH4
    const NM3_H2_PER_NM3_CH4 = 2.0;   // м³ H2 / м³ CH4
    const KG_C_PER_NM3_CH4  = 0.536;  // кг C / м³ CH4

    const $ = (id) => document.getElementById(id);
    const fmt = (x, digits=0) => {
      if (!isFinite(x)) return "—";
      return x.toLocaleString("ru-RU", { maximumFractionDigits: digits, minimumFractionDigits: digits });
    }

    const inputs = ["flow","conv","sei","tariff","h2price","cprice","ccost","gwp"].map($);
    inputs.forEach(el => el.addEventListener("input", calc));
    window.addEventListener("DOMContentLoaded", calc);

    function calc(){
      const flow = +$("flow").value || 0;           // м³ CH4/год
      const conv = (+$("conv").value || 0)/100;     // доля
      const sei  = +$("sei").value || 0;            // кВт·ч/м³ CH4
      const tariff = +$("tariff").value || 0;       // $/кВт·ч
      const h2p = +$("h2price").value || 0;         // $/кг H2
      const cp  = +$("cprice").value || 0;          // $/т C
      const cc  = +$("ccost").value || 0;           // $/т CO2e
      const gwp = +$("gwp").value || 28;            // кг CO2e / кг CH4

      const flowEff = flow * conv;                  // м³/год CH4, эффективно разрушённый

      // Продукты
      const h2kg  = flowEff * KG_H2_PER_NM3_CH4;    // кг/год H2
      const h2m3  = flowEff * NM3_H2_PER_NM3_CH4;   // м³/год H2
      const ckg   = flowEff * KG_C_PER_NM3_CH4;     // кг/год C
      const ct    = ckg / 1000;                     // т/год C

      // Энергия и её стоимость
      const kwh   = flowEff * sei;                  // кВт·ч/год
      const energyCost = kwh * tariff;              // $/год

      // Климатический эффект
      const ch4kg = flowEff * KG_CH4_PER_NM3;       // кг CH4/год
      const co2e_t = (ch4kg * gwp) / 1000;          // т CO2e/год

      // Выручка
      const revH2 = h2kg * h2p;                     // $/год
      const revC  = ct * cp;                        // $/год
      const revCO2 = co2e_t * cc;                   // $/год

      const profit = revH2 + revC + revCO2 - energyCost;

      // Вывод
      $("h2Mass").textContent = (h2kg>0)? `${fmt(h2kg,0)} кг/год` : "—";
      $("h2Vol").textContent  = (h2m3>0)? `${fmt(h2m3,0)} м³/год` : "";
      $("cMass").textContent  = (ct>0)? `${fmt(ct,2)}` : "—";
      $("co2e").textContent   = (co2e_t>0)? `${fmt(co2e_t,1)}` : "—";
      $("profit").textContent = isFinite(profit)? `${profit>=0?"+":""}${fmt(profit,0)} $/год` : "—";
    }
  </script>
</body>
</html>
